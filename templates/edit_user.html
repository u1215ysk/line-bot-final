<style>
    #edit-form { display: flex; flex-direction: column; }
    #edit-form label { margin-top: 1em; margin-bottom: 0.5em; font-weight: bold; }
    .form-actions { margin-top: 1.5em; display: flex; justify-content: space-between; }
    /* キャンセルボタン用のスタイルを追加 */
    .button-cancel { background-color: #6c757d; }
    .button-cancel:hover { background-color: #5a6268; }
</style>

<form id="edit-form" action="{{ url_for('update_user', user_id=user.id) }}" method="post">
    <h2><span style="font-size: 1.2em;">👤</span> ユーザー編集</h2>
    <p><strong>LINE表示名:</strong> {{ user.display_name }}</p>
    <p><strong>ユーザーID:</strong> <span class="user-id-display">{{ user.id }}</span></p>

    <label for="nickname">管理用ニックネーム:</label>
    <input type="text" id="nickname" name="nickname" value="{{ user.nickname or '' }}">

    <label for="tags">タグ:</label>
    <div class="tag-checkbox-group">
        {% for tag in all_tags %}
        <label>
            <input type="checkbox" name="tags" value="{{ tag.name }}" {% if tag.name in user.tags %}checked{% endif %}>
            {{ tag.name }}
        </label>
        {% endfor %}
    </div>
    
    <div class="form-actions">
        <button type="button" class="button-cancel" onclick="closeModal()">キャンセル</button>
        <button type="submit">更新</button>
    </div>
</form>