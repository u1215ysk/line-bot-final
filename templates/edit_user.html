{% extends "layout.html" %}
{% block title %}ユーザー編集{% endblock %}
{% block header %}ユーザー編集{% endblock %}

{% block content %}
<style>
    .tag-checkbox-group { display: flex; flex-wrap: wrap; gap: 15px; }
    .tag-checkbox-group label { display: flex; align-items: center; cursor: pointer; }
    .tag-checkbox-group input { margin-right: 5px; }
</style>
<div class="content-panel">
    <form action="{{ url_for('update_user', user_id=user.id) }}" method="post">
        <h2><span style="font-size: 1.2em;">👤</span> ユーザー情報</h2>
        <p><strong>LINE表示名:</strong> {{ user.display_name }}</p>

        <label for="nickname">管理用ニックネーム:</label>
        <input type="text" id="nickname" name="nickname" value="{{ user.nickname or '' }}">

        <label for="tags">タグ:</label>
        <div class="tag-checkbox-group">
            {% for tag in all_tags %}
            <label>
                <input type="checkbox" name="tags" value="{{ tag.name }}" {% if tag.name in user.tags %}checked{% endif %}>
                {{ tag.name }}
            </label>
            {% endfor %}
        </div>
        
        <div style="margin-top: 1.5em; text-align: right;">
            <button type="submit" class="button-save">更新</button>
        </div>
    </form>
    <a href="{{ url_for('admin_friends_page') }}">&laquo; 友だち一覧に戻る</a>
</div>
{% endblock %}